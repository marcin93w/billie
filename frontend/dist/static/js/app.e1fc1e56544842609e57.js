webpackJsonp([1],{"6xr+":function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("7+uW"),o={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var i=t("VU/8")({name:"app"},o,!1,function(e){t("aTrT")},null,null).exports,r=t("/ocq"),s=t("//Fk"),d=t.n(s),c={homeUrl:"https://messenger-debt-bot.herokuapp.com/",fbAppId:"135139390498529"};var u=t("mvHQ"),l=t.n(u);function p(){return new d.a(function(e,n){window.MessengerExtensions.getContext(c.fbAppId,function(n){e(n)},function(e){n(e)})})}function m(){window.MessengerExtensions.requestCloseBrowser()}var f={LENT:0,BORROWED:1,LENT_PAYOFF:2,BORROWED_PAYOFF:3};var v={name:"AddDebt",data:function(){var e=this;return{amount:10,debtTypes:f,isPayoffRadioValue:"0",isBorrowedRadioValue:"0",isPayoff:function(){return"0"!==e.isPayoffRadioValue},isBorrowed:function(){return"0"!==e.isBorrowedRadioValue},add:function(){var n,t,a=(n=e.isPayoff,t=e.isBorrowed,n?t?f.BORROWED_PAYOFF:f.LENT_PAYOFF:t?f.BORROWED:f.LENT);p().then(function(n){return t=n.psid,o=n.tid,i=a,r=e.amount,fetch("/debts/add",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:l()({psid:t,threadId:o,debtType:i,amount:r})}).then(function(e){return e.json()});var t,o,i,r}).then(function(n){return function(e,n,t,a){var o={attachment:{type:"template",payload:{template_type:"generic",elements:[{title:"Wisisz "+e+" "+a+" zł "+t,subtitle:"Akceptuj dług aby otrzymać przypomnienie.",image_url:c.homeUrl+"assets/logo.png",default_action:{type:"web_url",url:c.homeUrl+"#/acceptDebt/"+n,messenger_extensions:!0,webview_height_ratio:"compact"},buttons:[{type:"web_url",url:c.homeUrl+"#/acceptDebt/"+n,title:"Akceptuj",messenger_extensions:!0,webview_height_ratio:"compact"}]}]}}};return new d.a(function(e,n){window.MessengerExtensions.beginShareFlow(function(n){e(n.is_sent)},function(e,t){n(t)},o,"current_thread")})}(n.userName,n.debtId,a,e.amount)}).then(function(e){return e?m():null}).catch(alert)}}}},_={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"adding-panel"},[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.isPayoffRadioValue,expression:"isPayoffRadioValue"}],attrs:{type:"radio",value:"0",name:"isPayoff"},domProps:{checked:e._q(e.isPayoffRadioValue,"0")},on:{change:function(n){e.isPayoffRadioValue="0"}}}),e._v(" Pożyczka\n          "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.isPayoffRadioValue,expression:"isPayoffRadioValue"}],attrs:{type:"radio",value:"1",name:"isPayoff"},domProps:{checked:e._q(e.isPayoffRadioValue,"1")},on:{change:function(n){e.isPayoffRadioValue="1"}}}),e._v(" Spłata\n      ")]),e._v(" "),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.isBorrowedRadioValue,expression:"isBorrowedRadioValue"}],attrs:{type:"radio",value:"0",name:"isBorrowed"},domProps:{checked:e._q(e.isBorrowedRadioValue,"0")},on:{change:function(n){e.isBorrowedRadioValue="0"}}}),e._v(" "),e.isPayoff()?t("span",[e._v(" Ktoś mi oddaje")]):t("span",[e._v(" Pożyczam od kogoś")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.isBorrowedRadioValue,expression:"isBorrowedRadioValue"}],attrs:{type:"radio",value:"1",name:"isBorrowed"},domProps:{checked:e._q(e.isBorrowedRadioValue,"1")},on:{change:function(n){e.isBorrowedRadioValue="1"}}}),e._v(" "),e.isPayoff()?t("span",[e._v(" Oddaję komuś")]):t("span",[e._v(" Pożyczam komuś")])]),e._v(" "),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],attrs:{type:"number",id:"amount"},domProps:{value:e.amount},on:{input:function(n){n.target.composing||(e.amount=n.target.value)}}})]),e._v(" "),t("div",[t("button",{on:{click:function(n){e.add()}}},[e._v("Send")])])])},staticRenderFns:[]};var h={name:"MainPage",components:{"add-debt":t("VU/8")(v,_,!1,function(e){t("lwt1")},"data-v-666687b8",null).exports},data:function(){return{}}},w={render:function(){var e=this.$createElement;return(this._self._c||e)("add-debt")},staticRenderFns:[]},y=t("VU/8")(h,w,!1,null,null,null).exports,b={name:"AddDebt",data:function(){return{message:"Accepting debt...",close:function(){m()}}},created:function(){var e=this;p().then(function(n){return t=n.psid,a=e.$route.params.id,fetch("/debts/accept/"+a,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:l()({psid:t})}).then(function(e){return e.json()});var t,a}).then(function(n){e.message="Debt has been accepted"}).catch(alert)}},g={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"adding-panel"},[t("p",[e._v(e._s(e.message))]),e._v(" "),t("button",{on:{click:function(n){e.close()}}},[e._v("Ok")])])},staticRenderFns:[]};var P=t("VU/8")(b,g,!1,function(e){t("6xr+")},"data-v-358ac0d2",null).exports;a.a.use(r.a);var R=new r.a({routes:[{path:"/",name:"HelloWorld",component:y},{path:"/acceptDebt/:id",name:"AcceptDebt",component:P}]});a.a.config.productionTip=!1,function(e,n,t){var a,o=e.getElementsByTagName("script")[0];e.getElementById("Messenger")||((a=e.createElement("script")).id="Messenger",a.src="//connect.facebook.com/en_US/messenger.Extensions.js",o.parentNode.insertBefore(a,o))}(document),window.extAsyncInit=function(){new a.a({el:"#app",router:R,template:"<App/>",components:{App:i}})}},aTrT:function(e,n){},lwt1:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.e1fc1e56544842609e57.js.map