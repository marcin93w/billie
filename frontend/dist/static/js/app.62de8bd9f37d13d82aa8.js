webpackJsonp([1],{"0Bf3":function(e,t){},"6xr+":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"app"},o,!1,function(e){n("aTrT")},null,null).exports,i=n("/ocq"),c=n("//Fk"),s=n.n(c),u={homeUrl:"https://messenger-debt-bot.herokuapp.com/",fbAppId:"135139390498529"};var d=n("mvHQ"),p=n.n(d);function l(){return new s.a(function(e,t){window.MessengerExtensions.getContext(u.fbAppId,function(t){e(t)},function(e){t(e)})})}function m(){window.MessengerExtensions.requestCloseBrowser()}var f={name:"AddDebt",data:function(){var e=this;return{amount:10,add:function(){l().then(function(t){return n=t.psid,a=t.tid,o=0,r=e.amount,fetch("/debts/add",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:p()({psid:n,threadId:a,debtType:o,amount:r})}).then(function(e){return e.json()});var n,a,o,r}).then(function(t){return function(e,t,n){var a={attachment:{type:"template",payload:{template_type:"generic",elements:[{title:"Wisisz "+e+" "+n+" z≈Ç",subtitle:"za piwo",image_url:u.homeUrl+"assets/logo.png",default_action:{type:"web_url",url:u.homeUrl+"#/acceptDebt/"+t},buttons:[{type:"web_url",url:u.homeUrl+"#/acceptDebt/"+t,title:"Akceptuj",messenger_extensions:!0,webview_height_ratio:"compact"}]}]}}};return new s.a(function(e,t){window.MessengerExtensions.beginShareFlow(function(t){e(t.is_sent)},function(e,n){t(n)},a,"current_thread")})}(t.userName,t.debtId,e.amount)}).then(function(e){return e?m():null}).catch(alert)}}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"adding-panel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],attrs:{type:"number",id:"amount"},domProps:{value:e.amount},on:{input:function(t){t.target.composing||(e.amount=t.target.value)}}}),e._v(" "),n("button",{on:{click:function(t){e.add()}}},[e._v("Send")])])},staticRenderFns:[]};var v={name:"MainPage",components:{"add-debt":n("VU/8")(f,h,!1,function(e){n("0Bf3")},"data-v-add8e13a",null).exports},data:function(){return{}}},b={render:function(){var e=this.$createElement;return(this._self._c||e)("add-debt")},staticRenderFns:[]},g=n("VU/8")(v,b,!1,null,null,null).exports,_={name:"AddDebt",data:function(){return{message:"Accepting debt...",close:function(){m()}}},created:function(){var e=this;l().then(function(t){return n=t.psid,a=e.$route.params.id,fetch("/debts/accept/"+a,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:p()({psid:n})}).then(function(e){return e.json()});var n,a}).then(function(t){e.message="Debt has been accepted"}).catch(alert)}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"adding-panel"},[n("p",[e._v(e._s(e.message))]),e._v(" "),n("button",{on:{click:function(t){e.close()}}},[e._v("Ok")])])},staticRenderFns:[]};var x=n("VU/8")(_,w,!1,function(e){n("6xr+")},"data-v-358ac0d2",null).exports;a.a.use(i.a);var y=new i.a({routes:[{path:"/",name:"HelloWorld",component:g},{path:"/acceptDebt/:id",name:"AcceptDebt",component:x}]});a.a.config.productionTip=!1,function(e,t,n){var a,o=e.getElementsByTagName("script")[0];e.getElementById("Messenger")||((a=e.createElement("script")).id="Messenger",a.src="//connect.facebook.com/en_US/messenger.Extensions.js",o.parentNode.insertBefore(a,o))}(document),window.extAsyncInit=function(){new a.a({el:"#app",router:y,template:"<App/>",components:{App:r}})}},aTrT:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.62de8bd9f37d13d82aa8.js.map